---
import { menuConfig } from "config/site";
---

<header id="navbar" class="sticky top-0 z-50 px-4 w-full dark:border-white/15 border-primary/15 border-b-[1px] duration-150">
  <div class="flex py-4 items-center space-x-4 justify-between sm:space-x-0">
    <!-- Site Logo -->
    <div class="flex gap-6 md:gap-10">
      <a href="/" class="flex items-center space-x-2 tracking-tight text-primary dark:text-white">
        <span class="inline-block font-bold display wide">LP Dev Central</span>
      </a>
    </div>

    <!-- Desktop Menu -->
    <div class="hidden sm:flex flex-1 items-center justify-end space-x-4">
      <nav class="flex items-center space-x-1 tracking-tight text-primary dark:text-white">
        {menuConfig.mainNav.map(item => (
          <a href={item.href}>{item.title}</a>
        ))}
      </nav>
    </div>

    <!-- Mobile Menu Button -->
    <button id="mobile-menu-toggle" class="sm:hidden flex items-center text-primary dark:text-white">
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          id="mobile-menu-icon"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"
        ></path>
      </svg>
    </button>

    <!-- <button id="mobile-menu-toggle" class="mobile-menu-2 sm:hidden flex items-center text-primary dark:text-white">
      <span class="line-1"></span>
      <span class="line-2"></span>
      <span class="line-3"></span>
    </button> -->
  </div>

  <!-- Mobile Menu -->
  <div id="mobile-menu" class="sm:hidden transition-all duration-300 h-0 opacity-0 overflow-hidden">
    <nav class="flex flex-col items-start space-y-2 py-4">
      {menuConfig.mainNav.map(item => (
        <a href={item.href} class="tracking-tight text-primary dark:text-white">{item.title}</a>
      ))}
    </nav>
  </div>

</header>

<script is:inline>
  // Stickyness
  document.addEventListener('scroll', function() {
    const header = document.getElementById('navbar');
    const classes = [
      'shadow-xl', 
      'dark:shadow-thick', 
      'bg-background/95', 
      'dark:bg-secondary/75', 
      'backdrop-blur', 
      'supports-[backdrop-filter]:bg-background/75'
    ];

    if (window.scrollY > 8) {
      header.classList.add(...classes);
    } else {
      header.classList.remove(...classes);
    }
  });

  // Mobile Menu Toggle
  const menuToggle = document.getElementById('mobile-menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('mobile-menu-icon');
  let isMenuOpen = false;

  menuToggle.addEventListener('click', function() {
    isMenuOpen = !isMenuOpen;
    if (isMenuOpen) {
      mobileMenu.classList.remove('h-0', 'opacity-0');
      mobileMenu.classList.add('h-auto', 'opacity-100');
      menuIcon.setAttribute('d', 'M6 18L18 6M6 6l12 12'); // Icona "X"
    } else {
      mobileMenu.classList.remove('h-auto', 'opacity-100');
      mobileMenu.classList.add('h-0', 'opacity-0');
      menuIcon.setAttribute('d', 'M4 6h16M4 12h16M4 18h16'); // Icona hamburger
    }
  });
</script>