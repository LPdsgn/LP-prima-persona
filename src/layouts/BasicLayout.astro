---
// Globals
import '../styles/global.css';
import '../styles/mobile-menu-toggle.css';

import MetaTags from '@/components/markup/MetaTags.astro';
import Favicons from '@/components/markup/Favicon.astro';
import FontsAndStyles from '@/components/markup/FontsAndStyles.astro';
import Scripts from '@/components/markup/Scripts.astro';
import GTMhead from "@/components/analytics/GTMhead.astro";
import GTMafterBody from "@/components/analytics/GTMafterBody.astro";
import HeadScripts from '@/components/markup/HeadScripts.astro';
import HeadStyles from '@/components/markup/HeadStyles.astro';

import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';
import SpeedInsights from '@vercel/speed-insights/astro';
import { ViewTransitions } from 'astro:transitions';
import { Analytics } from '@vercel/analytics/react';

interface Props {
  title?: string | undefined
  description?: string | undefined
  ogImage?: string | undefined
  author?: string | "Luigi Pedata"
  GTMid: string;
  headScripts?: string[];
  headStyles?: string[];
}

const canonicalURL = new URL(Astro.url.pathname, Astro.site)
let sitename = Astro.url;
let siteURL = Astro.site;

if (Astro.props.ogImage === undefined) {
  Astro.props.ogImage = `${Astro.url.origin}/media/og/og-lpdsgn-b.jpg`;
}

const { title, description, ogImage, author, headScripts = [], headStyles = [], GTMid = "GTM-NWRH6X5" } = Astro.props
---

<!doctype html>
<html lang="en" class="lenis dark bg-zinc-200 dark:bg-custom-primary">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="UTF-8" />
    <meta name="robots" content="index, follow" />
    <meta name="googlebot" content="index, follow" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <GTMhead GTMid={GTMid} />
    <MetaTags title={title} description={description} author={author} canonicalURL={canonicalURL} sitename={sitename} siteURL={siteURL} ogImage={ogImage} />
    <Favicons />
    <FontsAndStyles />
    <Scripts />
    <HeadScripts scripts={headScripts} />
    <HeadStyles styles={headStyles} />
    <ViewTransitions />
  </head>

  <body class="bg-zinc-200 dark:bg-custom-primary min-h-svh flex flex-col items-stretch">
    <Header transition:persist />
      <div transition:animate="fade">
        <slot />
      </div>
    <Footer transition:persist />
    <SpeedInsights />
    <Analytics />
  </body>
</html>
